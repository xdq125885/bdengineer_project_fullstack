# ğŸ¤– åŸºäºå¤§æ¨¡å‹çš„æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆå™¨

ä¸€ä¸ªå…¨æ ˆåº”ç”¨ï¼Œåˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰è‡ªåŠ¨ç”Ÿæˆé«˜è´¨é‡çš„æµ‹è¯•ç”¨ä¾‹ã€‚æ”¯æŒå¤šç§è¾“å…¥æ–¹å¼ï¼ˆPRDæ–‡æœ¬ã€é£ä¹¦æ–‡æ¡£ã€UIæˆªå›¾ï¼‰ã€æµå¼è¾“å‡ºã€æ€ç»´å¯¼å›¾å¯è§†åŒ–å’Œæµ‹è¯•ç”¨ä¾‹è¯„æµ‹ã€‚

## âœ¨ ä¸»è¦ç‰¹æ€§

- **å¤šæºè¾“å…¥æ”¯æŒ**
  - ğŸ“ ç²˜è´´ PRD æ–‡æœ¬ç›´æ¥ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹
  - ğŸ”— è¾“å…¥é£ä¹¦æ–‡æ¡£é“¾æ¥è‡ªåŠ¨æå–å†…å®¹
  - ğŸ–¼ï¸ ä¸Šä¼  UI æˆªå›¾æˆ–æµç¨‹å›¾è¿›è¡Œå¤šæ¨¡æ€è¯†åˆ«

- **æ™ºèƒ½ç”Ÿæˆ**
  - ğŸ§  åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„æ™ºèƒ½æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ
  - âš™ï¸ å¯è°ƒèŠ‚æ¸©åº¦å‚æ•°æ§åˆ¶ç”Ÿæˆçš„å¤šæ ·æ€§
  - ğŸ“Š æ”¯æŒæµå¼è¾“å‡ºï¼ˆSSEï¼‰å®æ—¶æ˜¾ç¤ºç”Ÿæˆè¿›åº¦

- **å¯è§†åŒ–ä¸å¯¼å‡º**
  - ğŸ“‹ è¡¨æ ¼è§†å›¾å±•ç¤ºæµ‹è¯•ç”¨ä¾‹
  - ğŸ§­ æ€ç»´å¯¼å›¾è§†å›¾å±•ç¤ºç”¨ä¾‹å…³ç³»
  - ğŸ“‹ å¤åˆ¶ä¸º Markdown æ ¼å¼
  - ğŸ“„ å¯¼å‡ºä¸º JSON æ ¼å¼

- **æµ‹è¯•è¯„æµ‹**
  - ğŸ¯ å†…ç½®æµ‹è¯•ç”¨ä¾‹è¯„æµ‹å·¥å…·
  - ğŸ“ˆ æ”¯æŒç›¸ä¼¼åº¦åŒ¹é…å’ŒæŒ‡æ ‡è®¡ç®—
  - ğŸ’¾ è‡ªåŠ¨ä¿å­˜æœ€æ–°ç”Ÿæˆçš„ç”¨ä¾‹

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
test-case-generator/
â”œâ”€â”€ frontend/                    # React + Vite å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/         # React ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ InputPanel.tsx       # è¾“å…¥é¢æ¿ï¼ˆPRDã€é£ä¹¦ã€å›¾ç‰‡ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ Controls.tsx         # å‚æ•°æ§åˆ¶é¢æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ ResultsTable.tsx     # ç»“æœè¡¨æ ¼è§†å›¾
â”‚   â”‚   â”‚   â”œâ”€â”€ MindMapFlow.tsx      # æ€ç»´å¯¼å›¾è§†å›¾
â”‚   â”‚   â”‚   â”œâ”€â”€ ProgressPanel.tsx    # æµå¼è¾“å‡ºè¿›åº¦é¢æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ TestCaseGenerator.tsx # ä¸»ç”Ÿæˆå™¨ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ MindMapView.tsx      # æ€ç»´å¯¼å›¾æ¸²æŸ“
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â””â”€â”€ EvalPage.tsx        # æµ‹è¯•è¯„æµ‹é¡µé¢
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ api.ts              # API è°ƒç”¨æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ generate.ts         # ç”Ÿæˆé€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ markdown.ts         # Markdown å¯¼å‡º
â”‚   â”‚   â”‚   â”œâ”€â”€ storage.ts          # æœ¬åœ°å­˜å‚¨
â”‚   â”‚   â”‚   â”œâ”€â”€ stream.ts           # SSE æµå¼å¤„ç†
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ eval/                   # è¯„æµ‹æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ evaluate.ts         # è¯„æµ‹ä¸»é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ similarity.ts       # ç›¸ä¼¼åº¦è®¡ç®—
â”‚   â”‚   â”‚   â”œâ”€â”€ metrics.ts          # æŒ‡æ ‡è®¡ç®—
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ App.tsx                 # ä¸»åº”ç”¨
â”‚   â”‚   â”œâ”€â”€ main.tsx                # å…¥å£
â”‚   â”‚   â””â”€â”€ types.ts                # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â””â”€â”€ tailwind.config.js
â”‚
â””â”€â”€ backend/                     # Express.js åç«¯æœåŠ¡
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ controllers/         # è¯·æ±‚å¤„ç†å™¨
    â”‚   â”‚   â”œâ”€â”€ generate.controller.ts      # æ™®é€šç”Ÿæˆæ¥å£
    â”‚   â”‚   â”œâ”€â”€ generate.stream.controller.ts # æµå¼ç”Ÿæˆæ¥å£
    â”‚   â”‚   â””â”€â”€ lark.controller.ts          # é£ä¹¦æ–‡æ¡£å¤„ç†
    â”‚   â”œâ”€â”€ services/            # ä¸šåŠ¡é€»è¾‘
    â”‚   â”‚   â”œâ”€â”€ generate.service.ts    # ç”ŸæˆæœåŠ¡
    â”‚   â”‚   â””â”€â”€ lark.service.ts        # é£ä¹¦ API æœåŠ¡
    â”‚   â””â”€â”€ index.ts             # æœåŠ¡å™¨å…¥å£
    â”œâ”€â”€ package.json
    â”œâ”€â”€ tsconfig.json
    â”œâ”€â”€ .env                     # ç¯å¢ƒé…ç½®ç¤ºä¾‹
    â””â”€â”€ .env.local               # æœ¬åœ°ç¯å¢ƒé…ç½®ï¼ˆä¸æäº¤ï¼‰
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 18.0.0
- npm æˆ– yarn
- LLM API å¯†é’¥ï¼ˆOpenAI æˆ–å…¼å®¹çš„ APIï¼‰
- ï¼ˆå¯é€‰ï¼‰é£ä¹¦åº”ç”¨å‡­è¯ï¼ˆç”¨äºè¯»å–é£ä¹¦æ–‡æ¡£ï¼‰

### å®‰è£…ä¾èµ–

```bash
# å®‰è£…å‰ç«¯ä¾èµ–
npm install

# å®‰è£…åç«¯ä¾èµ–
cd backend
npm install
cd ..
```

### ç¯å¢ƒé…ç½®

åœ¨ `backend` ç›®å½•åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```env
# LLM é…ç½®ï¼ˆå¿…éœ€ï¼‰
LLM_API_KEY=your_api_key_here
LLM_BASE_URL=  # æ”¯æŒå…¼å®¹ API
LLM_MODEL=               # ä½¿ç”¨çš„æ¨¡å‹

# é£ä¹¦é…ç½®ï¼ˆå¯é€‰ï¼Œç”¨äºè¯»å–é£ä¹¦æ–‡æ¡£ï¼‰
LARK_APP_ID=your_lark_app_id
LARK_APP_SECRET=your_lark_app_secret

# æœåŠ¡å™¨é…ç½®
PORT=8787
CORS_ORIGIN=http://localhost:5173,http://localhost:3000

# ç¯å¢ƒ
NODE_ENV=development
```

### å¯åŠ¨å¼€å‘æœåŠ¡

```bash
# ç»ˆç«¯ 1ï¼šå¯åŠ¨åç«¯æœåŠ¡
cd backend
npm run dev
# åç«¯è¿è¡Œåœ¨ http://localhost:8787

# ç»ˆç«¯ 2ï¼šå¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡
npm run dev
# å‰ç«¯è¿è¡Œåœ¨ http://localhost:5173
```

è®¿é—® http://localhost:5173 å³å¯ä½¿ç”¨åº”ç”¨ã€‚

### ç”Ÿäº§æ„å»º

```bash
# æ„å»ºå‰ç«¯
npm run build

# æ„å»ºåç«¯
cd backend
npm run build
npm start
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### 1. ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹

**æ–¹å¼ä¸€ï¼šç²˜è´´ PRD æ–‡æœ¬**
- åœ¨å·¦ä¾§è¾“å…¥æ¡†ç²˜è´´äº§å“éœ€æ±‚æ–‡æ¡£
- ç‚¹å‡»"ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹"æŒ‰é’®

**æ–¹å¼äºŒï¼šè¾“å…¥é£ä¹¦æ–‡æ¡£é“¾æ¥**
- åœ¨é£ä¹¦é“¾æ¥è¾“å…¥æ¡†ç²˜è´´æ–‡æ¡£ URL
- åç«¯ä¼šè‡ªåŠ¨æå–æ–‡æ¡£å†…å®¹

**æ–¹å¼ä¸‰ï¼šä¸Šä¼  UI æˆªå›¾**
- ç‚¹å‡»ä¸Šä¼ æŒ‰é’®é€‰æ‹© UI æˆªå›¾æˆ–æµç¨‹å›¾
- æ”¯æŒå¤šæ¨¡æ€è¯†åˆ«ï¼ˆéœ€åç«¯æ¨¡å‹æ”¯æŒï¼‰

### 2. è°ƒæ•´ç”Ÿæˆå‚æ•°

- **æ¸©åº¦ï¼ˆTemperatureï¼‰**ï¼šæ§åˆ¶ç”Ÿæˆçš„å¤šæ ·æ€§
  - ä½æ¸©åº¦ï¼ˆ0.0-0.3ï¼‰ï¼šæ›´ç¨³å®šã€ä¸€è‡´çš„ç»“æœ
  - é«˜æ¸©åº¦ï¼ˆ0.7-1.0ï¼‰ï¼šæ›´å¤šæ ·ã€åˆ›æ„çš„ç»“æœ

### 3. æµå¼è¾“å‡ºï¼ˆBetaï¼‰

- å‹¾é€‰"æµå¼è¾“å‡º(beta)"å¤é€‰æ¡†
- å®æ—¶æŸ¥çœ‹ç”Ÿæˆè¿›åº¦å’Œä¸­é—´ç»“æœ
- æ”¯æŒéšæ—¶åœæ­¢ç”Ÿæˆ

### 4. æŸ¥çœ‹ç»“æœ

- **è¡¨æ ¼è§†å›¾**ï¼šæ¸…æ™°å±•ç¤ºæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹
- **æ€ç»´å¯¼å›¾**ï¼šå¯è§†åŒ–ç”¨ä¾‹ä¹‹é—´çš„å…³ç³»

### 5. å¯¼å‡ºç»“æœ

- **å¤åˆ¶ Markdown**ï¼šå¤åˆ¶ä¸º Markdown æ ¼å¼
- **å¯¼å‡º JSON**ï¼šä¸‹è½½ä¸º JSON æ–‡ä»¶

### 6. è¯„æµ‹ç”¨ä¾‹

- ç‚¹å‡»"ä¸€é”®è¯„æµ‹"è¿›å…¥è¯„æµ‹é¡µé¢
- æ”¯æŒä¸å·²æœ‰ç”¨ä¾‹çš„ç›¸ä¼¼åº¦å¯¹æ¯”
- æŸ¥çœ‹è¯¦ç»†çš„è¯„æµ‹æŒ‡æ ‡

## ğŸ”§ API æ–‡æ¡£

### åç«¯ API ç«¯ç‚¹

#### 1. ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼ˆæ™®é€šæ¨¡å¼ï¼‰

```
POST /api/generate
Content-Type: application/json

{
  "prdText": "äº§å“éœ€æ±‚æ–‡æ¡£å†…å®¹",
  "larkUrl": "https://...",  // å¯é€‰
  "images": [                 // å¯é€‰
    {
      "data": "base64_encoded_image",
      "type": "image/png"
    }
  ],
  "options": {
    "temperature": 0.2
  }
}
```

**å“åº”ï¼š**
```json
[
  {
    "id": "tc_001",
    "title": "ç”¨æˆ·ç™»å½•æˆåŠŸ",
    "description": "ç”¨æˆ·è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç åæˆåŠŸç™»å½•",
    "steps": [
      "æ‰“å¼€ç™»å½•é¡µé¢",
      "è¾“å…¥ç”¨æˆ·å",
      "è¾“å…¥å¯†ç ",
      "ç‚¹å‡»ç™»å½•æŒ‰é’®"
    ],
    "expectedResult": "æˆåŠŸç™»å½•ï¼Œè·³è½¬åˆ°é¦–é¡µ",
    "priority": "high"
  },
  ...
]
```

#### 2. ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼ˆæµå¼æ¨¡å¼ï¼‰

```
POST /api/generate/stream
Content-Type: application/json

// è¯·æ±‚ä½“åŒä¸Š
```

**å“åº”ï¼š** Server-Sent Events (SSE) æµ

```
event: meta
data: {"mode":"vision","model":"gpt-4o-mini"}

event: cases
data: [{"id":"tc_001",...},{"id":"tc_002",...}]

event: cases
data: [{"id":"tc_003",...}]

event: done
data: {}
```

#### 3. è¯»å–é£ä¹¦æ–‡æ¡£

```
POST /api/lark/raw
Content-Type: application/json

{
  "docUrl": "https://..."
}
```

**å“åº”ï¼š**
```json
{
  "content": "æ–‡æ¡£å†…å®¹",
  "title": "æ–‡æ¡£æ ‡é¢˜"
}
```

#### 4. å¥åº·æ£€æŸ¥

```
GET /health
```

**å“åº”ï¼š**
```json
{ "ok": true }
```

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹æ ¼å¼

ç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹éµå¾ªä»¥ä¸‹ TypeScript ç±»å‹ï¼š

```typescript
interface TestCase {
  id: string;                    // ç”¨ä¾‹ ID
  title: string;                 // ç”¨ä¾‹æ ‡é¢˜
  description?: string;          // ç”¨ä¾‹æè¿°
  steps: string[];              // æµ‹è¯•æ­¥éª¤
  expectedResult: string;        // é¢„æœŸç»“æœ
  priority?: 'high' | 'medium' | 'low';  // ä¼˜å…ˆçº§
  tags?: string[];              // æ ‡ç­¾
  preconditions?: string[];     // å‰ç½®æ¡ä»¶
  postconditions?: string[];    // åç½®æ¡ä»¶
}
```


## ğŸ“¦ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **React 19** - UI æ¡†æ¶
- **Vite 7** - æ„å»ºå·¥å…·
- **TypeScript** - ç±»å‹å®‰å…¨
- **Tailwind CSS** - æ ·å¼æ¡†æ¶
- **ReactFlow** - æ€ç»´å¯¼å›¾æ¸²æŸ“
- **XLSX** - Excel å¯¼å‡ºæ”¯æŒ
- **Lucide React** - å›¾æ ‡åº“

### åç«¯
- **Express.js** - Web æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨
- **CORS** - è·¨åŸŸæ”¯æŒ
- **dotenv** - ç¯å¢ƒé…ç½®

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“ æ³¨æ„äº‹é¡¹

### éƒ¨ç½²åˆ° Nginx

å¦‚æœä½¿ç”¨ Nginx ä»£ç†åç«¯ï¼Œè¯·åœ¨ Nginx é…ç½®ä¸­å…³é—­ä»£ç†ç¼“å†²ï¼Œä»¥æ”¯æŒ SSE æµå¼è¾“å‡ºï¼š

```nginx
location /api/generate/stream {
    proxy_buffering off;
    proxy_pass http://backend:8787;
}
```

### å›¾ç‰‡ä¸Šä¼ 

- å‰ç«¯å°†å›¾ç‰‡è½¬æ¢ä¸º base64 æ ¼å¼å‘é€ç»™åç«¯
- åç«¯å¯å°†å›¾ç‰‡ä¿å­˜åˆ° `uploads` ç›®å½•
- æ”¯æŒçš„æ ¼å¼ï¼šPNGã€JPGã€GIF ç­‰å¸¸è§å›¾ç‰‡æ ¼å¼

### å¤šæ¨¡æ€æ”¯æŒ

- éœ€è¦åç«¯ LLM æ”¯æŒå›¾åƒè¾“å…¥ï¼ˆå¦‚ OpenAI çš„ `gpt-4-vision`ï¼‰
- å½“å‰é…ç½®ä½¿ç”¨ `gpt-4o-mini` æ”¯æŒå¤šæ¨¡æ€

## ğŸ“„ è®¸å¯è¯

MIT License



æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Ÿæ¬¢è¿æäº¤ Issue æˆ– PRï¼[object Object]